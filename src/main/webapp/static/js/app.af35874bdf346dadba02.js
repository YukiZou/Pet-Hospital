webpackJsonp([1],{"04x+":function(e,t){},ENLC:function(e,t){},Gaea:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("MVMM"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("Z0/y")({name:"App"},s,!1,function(e){n("VU9I")},null,null).exports,a=n("zO6J"),u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))]),e._v(" "),n("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),n("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),n("br"),e._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var o=n("Z0/y")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(e){n("04x+")},"data-v-694cd902",null).exports,l={props:{name:String,auth:String},data:function(){return{username:this.name}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n    header:"+this._s(this.username)+"\n  ")])])},staticRenderFns:[]},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("sidebar")]),e._v(" "),n("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" "),n("router-link",{attrs:{to:"/question"}},[e._v("试题管理")]),e._v(" "),n("router-link",{attrs:{to:"/department"}},[e._v("科室管理")]),e._v(" "),n("router-link",{attrs:{to:"/procedure"}},[e._v("流程管理")]),e._v(" "),n("router-link",{attrs:{to:"/case"}},[e._v("病例管理")])],1)},staticRenderFns:[]},d={components:{myHeader:n("Z0/y")(l,h,!1,null,null,null).exports,mySidebar:n("Z0/y")(null,c,!1,null,null,null).exports},data:function(){return{name:"xxx",auth:0}},created:function(){this.name=this.getCookie("name"),this.auth=this.getCookie("auth"),this.userValidate()},methods:{userValidate:function(){"2"!==this.auth&&"3"!==this.auth&&(console.log("myApp.vue - userValidate fail"),this.$router.push({name:"Login"}))},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("my-header",{attrs:{name:this.name,auth:this.auth}}),this._v(" "),t("my-sidebar"),this._v(" "),t("router-view")],1)},staticRenderFns:[]},p=n("Z0/y")(d,v,!1,null,null,null).exports,m={data:function(){return{name:"",pwd:"",msg:"Welcome to pet hospital"}},methods:{setCookie:function(e,t){document.cookie=e+"="+escape(t)+";max-age=360"},submit:function(){var e=this;""!==this.name&&""!==this.pwd?this.$api.post("/user/login",{userName:this.name,pwd:this.pwd},function(t){"success"===t.status?(e.setCookie("name",t.userName),e.setCookie("auth",t.auth),e.setCookie("picUrl",t.pictureUrl),e.$router.push({name:"User"})):e.msg="用户名或密码错误"}):this.msg="请输入用户名和密码后再登录"}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"username"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.pwd},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null},input:function(t){t.target.composing||(e.pwd=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.submit}},[e._v("登录")]),e._v(" "),n("p",[e._v(e._s(e.msg))])])},staticRenderFns:[]};var f=n("Z0/y")(m,_,!1,function(e){n("Gaea")},null,null).exports,g={data:function(){return{authFilter:"0",options:[{value:"0",text:"All"},{value:"1",text:"User"},{value:"2",text:"Admin"},{value:"3",text:"Superadmin"}],users:[],addTableVisible:!1,newUser:{name:"",pwd:"",auth:""},userAuthOptions:[],auth:"0",operatingUser:{id:"",pwd:"",auth:""},modifyAuthTableVisible:!1}},created:function(){this.getUserList(),this.auth=this.getCookie("auth"),this.userAuthOptions=this.getUserAuthOptions(this.auth)},computed:{filteredUsers:function(){return"0"===this.authFilter?this.users:this.users.filter(function(e){return-1!==e.auth.indexOf(this.authFilter)}.bind(this))}},methods:{getUserList:function(){var e=this;this.$api.post("/user/all",null,function(t){"success"===t.status?e.users=t.userList:(window.alert("用户列表获取失败，刷新中..."),window.location.reload())})},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},getOperationsFilter:function(e,t){return"3"!==this.auth&&(("2"!==this.auth||"1"!==t||"modifyAuth"===e)&&("2"===this.auth||void this.$router.push({name:"Login"})))},getUserAuthOptions:function(e){return"3"===e?this.options.slice(1,4):"2"===e?this.options.slice(1,2):(console.log("user.vue - getUserAuthOptions fail"),void this.$router.push({name:"Login"}))},addUser:function(){var e=this;this.$api.post("/user/add",{userName:this.newUser.name,pwd:this.newUser.pwd,auth:this.newUser.auth},function(t){"success"===t.status?e.users.push({id:t.id,name:t.userName,auth:t.auth}):window.alert("增加用户失败")}),this.newUser.name="",this.newUser.auth="",this.addTableVisible=!1},removeUser:function(e){var t=this;this.$api.post("/user/delete",{id:e},function(e){"success"===e.status?t.getUserList():(window.alert("删除用户失败"),console.log(e))})},resetPwd:function(e){console.log(e+"resetPwd\t")},showModifyTable:function(e){this.modifyAuthTableVisible=!this.modifyAuthTableVisible,!0===this.modifyAuthTableVisible&&(this.operatingUser.id=e)},modifyAuth:function(){var e=this;this.$api.post("/user/auth",{id:this.operatingUser.id,auth:this.operatingUser.auth},function(t){"success"===t.status?e.getUserList():(window.alert("更新用户权限失败"),console.log(t))}),this.getUserList()}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("user management")]),e._v(" "),n("table",{attrs:{border:"1"}},[n("thead",[n("tr",[n("th",[e._v("id")]),e._v(" "),n("th",[e._v("name")]),e._v(" "),n("th",[e._v("auth\n          "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.authFilter,expression:"authFilter"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.authFilter=t.target.multiple?n:n[0]}}},e._l(e.options,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])}))]),e._v(" "),n("th",[e._v("\n          operation\n        ")])])]),e._v(" "),n("tbody",e._l(e.filteredUsers,function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.id))]),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v(e._s(t.auth))]),e._v(" "),n("td",[n("button",{attrs:{disabled:e.getOperationsFilter("modifyAuth",t.auth)},on:{click:function(n){e.showModifyTable(t.id)}}},[e._v("修改权限")]),e._v(" "),n("button",{attrs:{disabled:e.getOperationsFilter("removeUser",t.auth)},on:{click:function(n){e.removeUser(t.id)}}},[e._v("删除用户")])])])}))]),e._v(" "),n("button",{on:{click:function(t){e.addTableVisible=!e.addTableVisible}}},[e._v("+")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.addTableVisible,expression:"addTableVisible"}]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{type:"text",placeholder:"username"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.pwd,expression:"newUser.pwd"}],attrs:{type:"text",placeholder:"password"},domProps:{value:e.newUser.pwd},on:{input:function(t){t.target.composing||e.$set(e.newUser,"pwd",t.target.value)}}}),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.newUser.auth,expression:"newUser.auth"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.newUser,"auth",t.target.multiple?n:n[0])}}},e._l(e.userAuthOptions,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])})),e._v(" "),n("button",{on:{click:e.addUser}},[e._v("增加用户")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.modifyAuthTableVisible,expression:"modifyAuthTableVisible"}]},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.operatingUser.auth,expression:"operatingUser.auth"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.operatingUser,"auth",t.target.multiple?n:n[0])}}},e._l(e.userAuthOptions,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])})),e._v(" "),n("button",{on:{click:e.modifyAuth}},[e._v("修改权限")])])])},staticRenderFns:[]},b=n("Z0/y")(g,w,!1,null,null,null).exports,y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("试题管理")])])}]},U=n("Z0/y")(null,y,!1,null,null,null).exports,k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("科室管理")])])}]},x=n("Z0/y")(null,k,!1,null,null,null).exports,E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("流程管理")])])}]},$=n("Z0/y")(null,E,!1,null,null,null).exports,A={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("病例管理")])])}]},T=n("Z0/y")(null,A,!1,null,null,null).exports;r.default.use(a.a);var F=new a.a({routes:[{path:"/",component:p,children:[{path:"user",name:"User",component:b},{path:"question",component:U},{path:"department",component:x},{path:"procedure",component:$},{path:"case",component:T}]},{path:"/helloworld",name:"HelloWorld",component:o},{path:"/login",name:"Login",component:f}]}),C=n("wi/X"),V=n.n(C),L=(n("ENLC"),"/api"),N=n("aozt");function O(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function P(e,t,n,r){n&&(n=function e(t){for(var n in t)null===t[n]&&delete t[n],"string"===O(t[n])?t[n]=t[n].trim():"object"===O(t[n])?t[n]=e(t[n]):"array"===O(t[n])&&(t[n]=e(t[n]));return t}(n)),N({method:e,url:t,data:"POST"===e||"PUT"===e?n:null,params:"GET"===e||"DELETE"===e?n:null,baseURL:L,withCredentials:!1}).then(function(e){r&&r(e.data)}).catch(function(e){var t=e.response;e&&window.alert("api error, HTTP CODE: "+t.status)})}var R={get:function(e,t,n){return P("GET",e,t,n)},post:function(e,t,n){return P("POST",e,t,n)},put:function(e,t,n){return P("PUT",e,t,n)},delete:function(e,t,n){return P("DELETE",e,t,n)}};r.default.prototype.$api=R,r.default.config.productionTip=!1,r.default.use(V.a),new r.default({el:"#app",router:F,components:{App:i},template:"<App/>"})},VU9I:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.af35874bdf346dadba02.js.map